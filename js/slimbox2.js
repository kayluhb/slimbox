/*!
	Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
(function(x){var F=x(window),v,f,G=-1,o,y,E,w,z,m,s,n=!window.XMLHttpRequest,t=[],l=document.documentElement,k={},u=new Image(),K=new Image(),I,a,g,q,J,d,H,c,B,L;x(function(){x("body").append(x([I=x('<div id="lb-overlay" />')[0],a=x('<div id="lb-center" />')[0],H=x('<div id="lb-bottom-container" />')[0]]).css("display","none"));g=x('<div id="lb-image" />').appendTo(a).append(q=x('<div style="position:relative;" />')[0])[0];c=x('<div id="lb-bottom" />').appendTo(H).append([x('<a id="lb-closeLink" href="#" />').add(I).click(D)[0],B=x('<div id="lb-caption" />')[0],L=x('<div id="lb-number" />')[0],J=x('<a id="lb-prev-link" href="#" />').click(C)[0],d=x('<a id="lb-next-link" href="#" />').click(e)[0],x('<div style="clear: both;" />')[0]])[0]});x.slimbox=function(O,N,M){v=x.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],padding:80},M);if(typeof O=="string"){O=[[O,N]];N=0}z=F.scrollTop()+(F.height()*0.5);m=v.initialWidth;s=v.initialHeight;x(a).css({top:Math.max(0,z-(s*0.5)),width:m,height:s,marginLeft:-m*0.5}).show();w=n||(I.currentStyle&&(I.currentStyle.position!="fixed"));if(w){I.style.position="absolute"}x(I).css("opacity",v.overlayOpacity).fadeIn(v.overlayFadeDuration);A();j(1);f=O;v.loop=v.loop&&(f.length>1);return b(N)};x.fn.slimbox=function(M,P,O){P=P||function(Q){return[Q.href,Q.title]};O=O||function(){return true};var N=this;return N.unbind("click").click(function(){var S=this,U=0,T,Q=0,R;T=x.grep(N,function(W,V){return O.call(S,W,V)});for(R=T.length;Q<R;++Q){if(T[Q]==S){U=Q}T[Q]=P(T[Q],Q)}return x.slimbox(T,U,M)})};function A(){var N=F.scrollLeft(),M=F.width();x([a,H]).css("left",N+(M*0.5));if(w){x(I).css({left:N,top:F.scrollTop(),width:M,height:F.height()})}}function j(M){if(M){x("object").add(n?"select":"embed").each(function(O,P){t[O]=[P,P.style.visibility];P.style.visibility="hidden"})}else{x.each(t,function(O,P){P[0].style.visibility=P[1]});t=[]}var N=M?"bind":"unbind";F[N]("scroll resize",A);x(document)[N]("keydown",p)}function p(O){var N=O.keyCode,M=x.inArray;return(M(N,v.closeKeys)>=0)?D():(M(N,v.nextKeys)>=0)?e():(M(N,v.previousKeys)>=0)?C():false}function C(){return b(y)}function e(){return b(E)}function b(M){if(M>=0){G=M;o=f[G][0];y=(G||(v.loop?f.length:0))-1;E=((G+1)%f.length)||(v.loop?0:-1);r();a.className="lb-loading";k=new Image();k.onload=i;k.src=o}return false}function i(){a.className="";var N=x(g),Q=x(window);N.css({backgroundImage:"url("+o+")",visibility:"hidden",display:""});x(q).width(k.width).height(k.height);x(B).html(f[G][1]||"");x(L).html((((f.length>1)&&v.counterText)||"").replace(/{x}/,G+1).replace(/{y}/,f.length));if(y>=0){u.src=f[y][0]}if(E>=0){K.src=f[E][0]}var M=Q.height()-v.padding,P=Q.width()-v.padding;m=g.offsetWidth;s=g.offsetHeight;if(s>M){m=m*(M/s);s=M}if(m>P){s=s*(P/m);m=P}var O=Math.max(0,z-(s*0.5));if(a.offsetHeight!=s){x(a).animate({height:s,top:O},v.resizeDuration,v.resizeEasing)}if(a.offsetWidth!=m){x(a).animate({width:m,marginLeft:-m*0.5},v.resizeDuration,v.resizeEasing)}x(a).queue(function(){x(H).css({width:m,top:O+s,marginLeft:-m*0.5,visibility:"hidden",display:""});N.css({backgroundSize:m+"px "+s+"px",display:"none",visibility:"",opacity:""}).fadeIn(v.imageFadeDuration,h)})}function h(){if(y>=0){x(J).show()}if(E>=0){x(d).show()}x(c).css("marginTop",-c.offsetHeight).animate({marginTop:0},v.captionAnimationDuration);H.style.visibility=""}function r(){k.onload=null;k.src=u.src=K.src=o;x([a,g,c]).stop(true);x([J,d,g,H]).hide()}function D(){if(G>=0){r();G=y=E=-1;x(a).hide();x(I).stop().fadeOut(v.overlayFadeDuration,j)}return false}})(jQuery);

// AUTOLOAD CODE BLOCK (MAY BE CHANGED OR REMOVED)
if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {
	jQuery(function($) {
		$("a[rel^='lightbox']").slimbox({/* Put custom options here */}, null, function(el) {
			return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
		});
	});
}
